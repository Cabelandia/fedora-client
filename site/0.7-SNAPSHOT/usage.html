<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Feb 24, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Edwin Shin" />
    <meta name="Date-Revision-yyyymmdd" content="20130224" />
    <meta http-equiv="Content-Language" content="en" />
    <title>MediaShelf fedora-client - Usage</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                          <a href="./" id="bannerLeft">
                                                                                                <img src="images/fedora-client.png"  alt="MediaShelf fedora-client"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2013-02-24</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.7-SNAPSHOT</li>
                          <li class="divider">|</li>             <li class="">
                    <a href="index.html" title="MediaShelf fedora-client">
        MediaShelf fedora-client</a>
        </li>
      <li class="divider ">/</li>
        <li class="">Usage</li>
                
                
                    
      
                                              
    <li class="pull-right">              <a href="http://github.com/mediashelf/" class="externalLink" title="Projects on GitHub">
        Projects on GitHub</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="http://www.yourmediashelf.com/" class="externalLink" title="MediaShelf">
        MediaShelf</a>
  </li>

                        </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">MediaShelf fedora-client</li>
                                
      <li>
    
                          <a href="index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Usage</a>
          </li>
                  
      <li>
    
                          <a href="history.html" title="History">
          <i class="none"></i>
        History</a>
            </li>
                  
      <li>
    
                          <a href="developers.html" title="Developers">
          <i class="none"></i>
        Developers</a>
            </li>
                                        <li class="nav-header">Modules</li>
                                
      <li>
    
                          <a href="fedora-client-core/index.html" title="fedora-client-core">
          <i class="none"></i>
        fedora-client-core</a>
            </li>
                  
      <li>
    
                          <a href="fedora-client-messaging/index.html" title="fedora-client-messaging">
          <i class="none"></i>
        fedora-client-messaging</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                                                                
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                          
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section"><h2>Usage<a name="Usage"></a></h2><p>Usage is simple: </p><ol style="list-style-type: decimal"><li>Create an instance of <a href="./apidocs/com/yourmediashelf/fedora/client/FedoraClient.html">FedoraClient</a><div class="source"><pre class="prettyprint">FedoraCredentials credentials = 
    new FedoraCredentials(&quot;http://example.org/fedora&quot;, &quot;username&quot;, &quot;password&quot;);
FedoraClient fedora = new FedoraClient(credentials);</pre></div></li><li>Optionally, set this instance of <tt>FedoraClient</tt> as the default for all requests<div class="source"><pre class="prettyprint">FedoraRequest.setDefaultClient(fedora);</pre></div></li><li>Build a <a href="./apidocs/com/yourmediashelf/fedora/client/request/FedoraRequest.html">FedoraRequest</a> for the Fedora API method and execute the request<div class="source"><pre class="prettyprint">IngestResponse response = new Ingest(&quot;test:pid&quot;).label(&quot;foo&quot;).execute();
String pid = response.getPid();</pre></div><p>Using static imports, you can use an even more abbreviated syntax:</p><div class="source"><pre class="prettyprint">import static com.yourmediashelf.fedora.client.FedoraClient.*;
...

    ingest(&quot;test:pid&quot;).execute();</pre></div></li></ol><div class="section"><h3>Optimistic locking<a name="Optimistic_locking"></a></h3><p>Use optimistic locking for <tt>modifyObject</tt> by passing the <tt>lastModifiedDate</tt> as a request parameter. If the request's <tt>lastModifiedDate</tt> is earlier than the object's, the request will fail with a HTTP 409 Conflict error.</p><div class="source"><pre class="prettyprint">Date lastModifiedDate = fedora.getLastModifiedDate(&quot;test:pid&quot;);
try {
    modifyObject(&quot;test:pid&quot;).label(&quot;bar&quot;).lastModifiedDate(lastModifiedDate).execute();
} catch(FedoraClientException e) {
    if (e.getStatus() == 409) {
        // do something
    }
}</pre></div></div><div class="section"><h3>Parsing a response<a name="Parsing_a_response"></a></h3><p><tt>FedoraRequest</tt>s return instances of a <tt>FedoraResponse</tt>. The response-specific implementations (e.g. <tt>AddDatastreamResponse</tt>, <tt>GetDatastreamResponse</tt>, etc.) provide convenience methods that parse the response body. However, at this writing, not every request has a corresponding response implemented (yet). In those cases, it is necessary to parse the &quot;raw&quot; response, as returned by <a href=".//apidocs/com/yourmediashelf/fedora/client/response/FedoraResponse.html#getEntityjava.lang.Class">FedoraReponse.getEntity(Class)</a> or <a href="./apidocs/com/yourmediashelf/fedora/client/response/FedoraResponse.html#getEntityInputStream">FedoraResponse.getEntityInputStream()</a>.</p><div class="source"><pre class="prettyprint">FedoraResponse r = getDatastream(&quot;test:pid&quot;, &quot;DC&quot;).format(&quot;html&quot;).execute();
String htmlResponseBody = r.getEntity(String.class);

GetDatastreamResponse gdr = getDatastream(&quot;test:pid&quot;, &quot;DC&quot;).execute();
assert(&quot;A&quot;.equals(gdr.getDatastreamProfile().getDsState()));</pre></div></div><div class="section"><h3>Passing requests to multiple Fedora instances<a name="Passing_requests_to_multiple_Fedora_instances"></a></h3><p>The same <tt>FedoraRequest</tt> can be re-used across multiple Fedora instances:</p><div class="source"><pre class="prettyprint">FedoraClient f1 = new FedoraClient(new FedoraCredentials(&quot;http://localhost:8080/fedora&quot;, 
    &quot;fedoraAdmin&quot;, &quot;pass1&quot;));
FedoraClient f2 = new FedoraClient(new FedoraCredentials(&quot;http://example.com/fedora&quot;, 
    &quot;fedoraAdmin&quot;, &quot;pass2&quot;));

Ingest ingest = new Ingest(&quot;test:pid&quot;).label(&quot;foo&quot;);
ingest.execute(f1);
ingest.execute(f2);</pre></div></div><div class="section"><h3>Including fedora-client in your Maven project<a name="Including_fedora-client_in_your_Maven_project"></a></h3><p>As of 0.1.7, fedora-client is now available via <a class="externalLink" href="http://search.maven.org/#search|ga|1|fedora-client">Maven Central</a>. Prior versions are available in the <a class="externalLink" href="https://m2.duraspace.org/content/repositories/thirdparty">DuraSpace Third-Party Maven Repository</a> .</p><p>As of 0.1.8, fedora-client is now a Maven multi-module project, producing fedora-client-core and fedora-client-messaging artifacts. Unless you specifically require support for Fedora Messaging, fedora-client-core is all you need. Similarly, if you only need support for Fedora Messaging and not Fedora's REST API, fedora-client-messaging is all you need.</p><p>Add the following to your pom.xml (substituting the actual, current version of fedora-client):</p><div class="source"><pre class="prettyprint">
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.yourmediashelf.fedora.client&lt;/groupId&gt;
        &lt;artifactId&gt;fedora-client-core&lt;/artifactId&gt;
        &lt;version&gt;0.7-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.yourmediashelf.fedora.client&lt;/groupId&gt;
        &lt;artifactId&gt;fedora-client-messaging&lt;/artifactId&gt;
        &lt;version&gt;0.7-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</pre></div></div><div class="section"><h3>Including fedora-client in your non-Maven project<a name="Including_fedora-client_in_your_non-Maven_project"></a></h3><p>As of version 0.1.5, fedora-client also distributes <i>-with-dependencies</i> jars that bundle all dependencies (except for log4j) for use with non-Maven-based projects.</p><p>These artifacts are available via <a class="externalLink" href="http://search.maven.org/#search|ga|1|fedora-client">Maven Central</a> and its mirrors or on the <a class="externalLink" href="https://github.com/mediashelf/fedora-client/downloads">fedora-client Github Downloads</a> page.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2010-2013
                        <a href="http://www.yourmediashelf.com/">MediaShelf</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
